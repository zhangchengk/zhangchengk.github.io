<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.50" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://zhangchengk.github.io/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/05-Java%E7%BA%BF%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1.html"><meta property="og:site_name" content="Pandaè¯šçš„åšå®¢"><meta property="og:title" content="Javaçº¿ç¨‹é—´çš„é€šä¿¡"><meta property="og:description" content="åˆç†çš„ä½¿ç”¨Javaå¤šçº¿ç¨‹å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚ä¸€èˆ¬æ¥è®²ï¼Œçº¿ç¨‹å†…éƒ¨æœ‰è‡ªå·±ç§æœ‰çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œäº’ä¸å¹²æ‰°ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦å¤šä¸ªçº¿ç¨‹ä¹‹é—´ç›¸äº’åä½œçš„æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬æŒæ¡Javaçº¿ç¨‹çš„é€šä¿¡æ–¹å¼ã€‚æœ¬æ–‡å°†ä»‹ç»Javaçº¿ç¨‹ä¹‹é—´çš„å‡ ç§é€šä¿¡åŸç†ã€‚"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-06-27T13:31:00.000Z"><meta property="article:author" content="Pandaè¯š"><meta property="article:published_time" content="2020-12-06T00:00:00.000Z"><meta property="article:modified_time" content="2024-06-27T13:31:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Javaçº¿ç¨‹é—´çš„é€šä¿¡","image":[""],"datePublished":"2020-12-06T00:00:00.000Z","dateModified":"2024-06-27T13:31:00.000Z","author":[{"@type":"Person","name":"Pandaè¯š","url":"https://zhangchengk.github.io/about/intro.html"}]}</script><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><meta name="referrer" content="no-referrer"><link rel="icon" href="/logo.png"><title>Javaçº¿ç¨‹é—´çš„é€šä¿¡ | Pandaè¯šçš„åšå®¢</title><meta name="description" content="åˆç†çš„ä½¿ç”¨Javaå¤šçº¿ç¨‹å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚ä¸€èˆ¬æ¥è®²ï¼Œçº¿ç¨‹å†…éƒ¨æœ‰è‡ªå·±ç§æœ‰çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œäº’ä¸å¹²æ‰°ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦å¤šä¸ªçº¿ç¨‹ä¹‹é—´ç›¸äº’åä½œçš„æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬æŒæ¡Javaçº¿ç¨‹çš„é€šä¿¡æ–¹å¼ã€‚æœ¬æ–‡å°†ä»‹ç»Javaçº¿ç¨‹ä¹‹é—´çš„å‡ ç§é€šä¿¡åŸç†ã€‚">
    <link rel="preload" href="/assets/style-C1M8s3dk.css" as="style"><link rel="stylesheet" href="/assets/style-C1M8s3dk.css">
    <link rel="modulepreload" href="/assets/app-BQ2saXR6.js"><link rel="modulepreload" href="/assets/05-Javaçº¿ç¨‹é—´çš„é€šä¿¡.html-DwuZj0Ef.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-DLR6avWb.js" as="script"><link rel="prefetch" href="/assets/001-ç¼–è¯‘NIFIæºç .html-CJ7A5YR2.js" as="script"><link rel="prefetch" href="/assets/002-NIFIè‡ªå®šä¹‰å¼€å‘è§„èŒƒ.html-UiryJWUm.js" as="script"><link rel="prefetch" href="/assets/003-Processorçš„ä¸€äº›æ–¹æ³•.html-ZLzV4Bqs.js" as="script"><link rel="prefetch" href="/assets/004-è‡ªå®šä¹‰Processor.html-Dt49uE92.js" as="script"><link rel="prefetch" href="/assets/005-è‡ªå®šä¹‰ExpressionLanguage.html-pmWXQqeO.js" as="script"><link rel="prefetch" href="/assets/006-NIFIå¯åŠ¨æºç .html-DQQgg2tD.js" as="script"><link rel="prefetch" href="/assets/007-åœ¨HTTPæ¨¡å¼ä¸‹å¼€å¯æƒé™æ¨¡å—.html-eM5TO-Cp.js" as="script"><link rel="prefetch" href="/assets/008-JettyServeræºç .html-BeA3S5k4.js" as="script"><link rel="prefetch" href="/assets/009-NiFiæºç .html-5b-gsjha.js" as="script"><link rel="prefetch" href="/assets/010-nifiæ³¨è§£.html-DtAiyJCV.js" as="script"><link rel="prefetch" href="/assets/011-Debeziumè¯¦ç»†åµŒå…¥NIFI.html-DqMLt9ul.js" as="script"><link rel="prefetch" href="/assets/RunNiFiæºç .html-CI_oNwiF.js" as="script"><link rel="prefetch" href="/assets/nifi-env-sh.html-CPZYnpNG.js" as="script"><link rel="prefetch" href="/assets/nifi-sh-start.html-BX9IX8Vp.js" as="script"><link rel="prefetch" href="/assets/nifi-sh.html-Ciox_vDF.js" as="script"><link rel="prefetch" href="/assets/000-ApacheNIFIå†å².html-BnstSNSw.js" as="script"><link rel="prefetch" href="/assets/001-NiFiæœ¯è¯­.html-CT9wTjo4.js" as="script"><link rel="prefetch" href="/assets/002-å¸¦ä½ ä½“éªŒApacheNIFI.html-4RCv-YCC.js" as="script"><link rel="prefetch" href="/assets/003-NIFIå…¥é—¨.html-DwCEANUp.js" as="script"><link rel="prefetch" href="/assets/004-æ•°æ®æŠ½å–çš„å¸¸è§æ–¹æ³•.html-CRpz2jgR.js" as="script"><link rel="prefetch" href="/assets/005-åŸºäºå¢é‡å­—æ®µåŒæ­¥æ•°æ®.html-CX5snXR0.js" as="script"><link rel="prefetch" href="/assets/006-NIFIå„ä¸ªNARåŒ…åŠŸèƒ½æ¦‚è¿°.html-Dvonk5ue.js" as="script"><link rel="prefetch" href="/assets/007-NaråŒ…åŠ è½½æœºåˆ¶æºç è§£è¯».html-CyjveXOY.js" as="script"><link rel="prefetch" href="/assets/008-NaråŒ…ä¸‹çš„MANIFEST.MF.html-CKAnSpO5.js" as="script"><link rel="prefetch" href="/assets/009-Apache NIFIç±»èµ„æºéš”ç¦»æœºåˆ¶.html-BXXru1jY.js" as="script"><link rel="prefetch" href="/assets/010-Apache NIFI Processoræƒ…å†µ.html-C2QkFr0g.js" as="script"><link rel="prefetch" href="/assets/011-ç†è§£connection.html-3A9NgNep.js" as="script"><link rel="prefetch" href="/assets/012-ç†è§£maxThreadè®¾ç½®.html-kk2MFQg0.js" as="script"><link rel="prefetch" href="/assets/013-RunDurationç†è§£.html-C15zb1qL.js" as="script"><link rel="prefetch" href="/assets/014-ContentRepositoryArchivingç†è§£.html-BQJLxtKm.js" as="script"><link rel="prefetch" href="/assets/015-Controller Servicesæ˜¯å®ˆæŠ¤è¿›ç¨‹.html-CmD65ZML.js" as="script"><link rel="prefetch" href="/assets/016-NIFIè°ƒåº¦.html-DJtYMBIc.js" as="script"><link rel="prefetch" href="/assets/017-NIFIé«˜å¯ç”¨.html-Ba_lgK3M.js" as="script"><link rel="prefetch" href="/assets/018-é€šè¿‡é…ç½®ä¼˜åŒ–NiFiæ€§èƒ½.html--AqMWzRB.js" as="script"><link rel="prefetch" href="/assets/019-NIFIé‡Œçš„æ•°æ®åº“è¿æ¥æ± .html-6AcRDkso.js" as="script"><link rel="prefetch" href="/assets/020-ä¸ºä»€ä¹ˆå»ºè®®ä½¿ç”¨NIFIé‡Œçš„Record.html-BtbbiyNe.js" as="script"><link rel="prefetch" href="/assets/021-NIFIè´¡çŒ®ä»£ç .html-B52uyUju.js" as="script"><link rel="prefetch" href="/assets/022-NIFIå¼€å¯HTTPS.html-uMJYWMGY.js" as="script"><link rel="prefetch" href="/assets/023-ExecuteScriptè„šæœ¬æ•™ç¨‹.html-CPELZgQF.js" as="script"><link rel="prefetch" href="/assets/024-å†…å®¹å­˜å‚¨åº“åŸç†.html-BQcGYGtl.js" as="script"><link rel="prefetch" href="/assets/025-FlowFileå­˜å‚¨åº“åŸç†.html-ErF0c33u.js" as="script"><link rel="prefetch" href="/assets/026-é¢„å†™æ—¥å¿—(WAL).html-C-BWjmSm.js" as="script"><link rel="prefetch" href="/assets/027-Provenanceå­˜å‚¨åº“åŸç†.html-C7DXoYTI.js" as="script"><link rel="prefetch" href="/assets/028-NIFIæ¶æ„.html-BsDgmDWp.js" as="script"><link rel="prefetch" href="/assets/029-NIFIäº‹åŠ¡åŸç†.html-C9EFGeAL.js" as="script"><link rel="prefetch" href="/assets/030-æ•°æ®åº“å­—æ®µç±»å‹.html-Bx7tJDHO.js" as="script"><link rel="prefetch" href="/assets/031-1.14.html-CcorQbQ3.js" as="script"><link rel="prefetch" href="/assets/032-CaptureChangeMySQL.html-UT3TJOCj.js" as="script"><link rel="prefetch" href="/assets/033-æµç¨‹å‘Šè­¦.html-CEE4vQ5k.js" as="script"><link rel="prefetch" href="/assets/034-JWT.html-DEJhoWdU.js" as="script"><link rel="prefetch" href="/assets/037-MySQLå…¨å­—æ®µæµ‹è¯•.html-CtTDJ8Ym.js" as="script"><link rel="prefetch" href="/assets/01-è¾“å…¥è¾“å‡ºæµ.html-D0m6tAcw.js" as="script"><link rel="prefetch" href="/assets/02-File.html-Bs3daldr.js" as="script"><link rel="prefetch" href="/assets/03-ç¼“å†²æµBufferedInputStreamä¸BufferedOutputStream.html-DVErWK_7.js" as="script"><link rel="prefetch" href="/assets/04-ç¼“å†²æµBufferedReaderä¸BufferedWriter.html-nuSExO8N.js" as="script"><link rel="prefetch" href="/assets/05-è½¬æ¢æµInputStreamReaderä¸OutputStreamWriter.html-BdTILOts.js" as="script"><link rel="prefetch" href="/assets/06-ByteArrayInputStreamä¸ByteArrayOutputStream.html-cQceoizA.js" as="script"><link rel="prefetch" href="/assets/07-CommonsIO2.5-FileUtils.html-BNxwgZBk.js" as="script"><link rel="prefetch" href="/assets/ByteArrayOutputStream.html-C4intLVS.js" as="script"><link rel="prefetch" href="/assets/Java SPIæœºåˆ¶.html-DFEswgme.js" as="script"><link rel="prefetch" href="/assets/Java8_JVMå†…å­˜æ¨¡å‹.html-C9CO24s_.js" as="script"><link rel="prefetch" href="/assets/Javaä¸­atomicåŒ…ä¸­çš„åŸå­æ“ä½œç±»æ€»ç»“.html-DI4YNkm1.js" as="script"><link rel="prefetch" href="/assets/Javaä¸­çš„é”.html-Ddl_FyhF.js" as="script"><link rel="prefetch" href="/assets/Javaå†…å­˜æ¨¡å‹åŸç†.html-8pUqBrNb.js" as="script"><link rel="prefetch" href="/assets/Javaåå°„.html-psn8jmaN.js" as="script"><link rel="prefetch" href="/assets/Javaå¯¼å…¥è¯­å¥ä¸­ä¸å®œä½¿ç”¨é€šé…ç¬¦.html-Ck4GdTLH.js" as="script"><link rel="prefetch" href="/assets/Javaç±»åŠ è½½å™¨.html-DZt5mMDj.js" as="script"><link rel="prefetch" href="/assets/Javaé‡Œå¸¦æ ‡ç­¾çš„breakå’Œcontinue.html-BL2a7Idj.js" as="script"><link rel="prefetch" href="/assets/Jvm-dump-jstack-jmap-jstat.html-D5mVlRyL.js" as="script"><link rel="prefetch" href="/assets/javaæ³¨è§£.html-PDn72uwa.js" as="script"><link rel="prefetch" href="/assets/webçš„å‘å±•å†å².html-C7kR9e7a.js" as="script"><link rel="prefetch" href="/assets/ä»£ç è®¾è®¡åŸç†.html-B156r6kR.js" as="script"><link rel="prefetch" href="/assets/ä½¿ç”¨List.html-EnruHwNJ.js" as="script"><link rel="prefetch" href="/assets/åå‘é”æ‰¹é‡é‡åå‘ä¸æ‰¹é‡æ’¤é”€.html-BrMCbVUP.js" as="script"><link rel="prefetch" href="/assets/åˆ°åº•ä»€ä¹ˆæ˜¯classpath.html-DgFh98Eu.js" as="script"><link rel="prefetch" href="/assets/åŠ¨æ‰‹ä½“éªŒJVMä¸­Classå¯¹è±¡çš„å”¯ä¸€æ€§.html-C8TkB51E.js" as="script"><link rel="prefetch" href="/assets/å¤šçº¿ç¨‹åŸºç¡€çŸ¥è¯†æ€»ç»“.html-Buy7Fx0O.js" as="script"><link rel="prefetch" href="/assets/æ‰“å°Javaå¯¹è±¡å¤´.html-BWvOzjWV.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥äº†è§£Javaé”.html-C8IyC5Tu.js" as="script"><link rel="prefetch" href="/assets/ç›¸å¯¹è·¯å¾„ä¸ç»å¯¹è·¯å¾„å»è¯»å–æ–‡ä»¶.html-itFzJh7b.js" as="script"><link rel="prefetch" href="/assets/ç±»åŠ è½½æœºåˆ¶.html-DgiPry-u.js" as="script"><link rel="prefetch" href="/assets/çº¿ç¨‹é€šä¿¡.html-ZZhdgcL0.js" as="script"><link rel="prefetch" href="/assets/è®©ä½ å½»åº•ç†è§£Synchronized.html-DuYdnFrn.js" as="script"><link rel="prefetch" href="/assets/JsonJoltæ•™ç¨‹.html-DRTXnJai.js" as="script"><link rel="prefetch" href="/assets/JsonJoltæ•™ç¨‹è‹±æ–‡ç‰ˆ.html-URDQhz8F.js" as="script"><link rel="prefetch" href="/assets/ä½¿ç”¨joltæ›¿æ¢å€¼.html-XhCcu9m4.js" as="script"><link rel="prefetch" href="/assets/001SpringåŸºç¡€çŸ¥è¯†.html-DMQ68bmv.js" as="script"><link rel="prefetch" href="/assets/002Beanå®šä¹‰å¸¸è§é”™è¯¯.html-rB2ZnqnZ.js" as="script"><link rel="prefetch" href="/assets/003ä¾èµ–æ³¨å…¥å¸¸è§é”™è¯¯ä¸Š.html-CzWuCd8O.js" as="script"><link rel="prefetch" href="/assets/004ä¾èµ–æ³¨å…¥å¸¸è§é”™è¯¯ä¸‹.html-DnyuKZde.js" as="script"><link rel="prefetch" href="/assets/005Beanç”Ÿå‘½å‘¨æœŸå¸¸è§é”™è¯¯.html-TmcVXpl6.js" as="script"><link rel="prefetch" href="/assets/006SpringAOPå¸¸è§é”™è¯¯ä¸Š.html-nluitirJ.js" as="script"><link rel="prefetch" href="/assets/007SpringAOPå¸¸è§é”™è¯¯ä¸‹.html-2zm0uSn0.js" as="script"><link rel="prefetch" href="/assets/008Springäº‹ä»¶å¸¸è§é”™è¯¯.html-BX-La7HT.js" as="script"><link rel="prefetch" href="/assets/009SpringWebURLè§£æå¸¸è§é”™è¯¯.html-DwiesQuy.js" as="script"><link rel="prefetch" href="/assets/010SpringWebHeaderè§£æå¸¸è§é”™è¯¯.html-B-d2sy8j.js" as="script"><link rel="prefetch" href="/assets/011SpringWebBodyè½¬åŒ–å¸¸è§é”™è¯¯.html-BWEkq2WI.js" as="script"><link rel="prefetch" href="/assets/012SpringWebå‚æ•°éªŒè¯å¸¸è§é”™è¯¯.html-BSoAe0U6.js" as="script"><link rel="prefetch" href="/assets/013SpringWebè¿‡æ»¤å™¨ä½¿ç”¨å¸¸è§é”™è¯¯ä¸Š.html-DJHSTFeS.js" as="script"><link rel="prefetch" href="/assets/014SpringWebè¿‡æ»¤å™¨ä½¿ç”¨å¸¸è§é”™è¯¯ä¸‹.html-BUbveaw9.js" as="script"><link rel="prefetch" href="/assets/001-ç®¡ç†OracleRedoLog.html-DQ8ytNoM.js" as="script"><link rel="prefetch" href="/assets/BITçš„å­—èŠ‚åº.html-BWbl0ptG.js" as="script"><link rel="prefetch" href="/assets/Oracle12cLogMineråˆ†æRedoæ—¥å¿—æ–‡ä»¶.html-Mu1DnRNh.js" as="script"><link rel="prefetch" href="/assets/åŸºäºæ°´å°çš„CDCæ¡†æ¶.html-DJHTtQdh.js" as="script"><link rel="prefetch" href="/assets/01-è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ.html-DR96DGsa.js" as="script"><link rel="prefetch" href="/assets/02-Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£.html-CMwRGru0.js" as="script"><link rel="prefetch" href="/assets/03-çº¿ç¨‹ç»„å’Œçº¿ç¨‹ä¼˜å…ˆçº§.html-hbizkmio.js" as="script"><link rel="prefetch" href="/assets/04-Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•.html-BKa-QF6Z.js" as="script"><link rel="prefetch" href="/assets/06-Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†.html-Dkdpcb5I.js" as="script"><link rel="prefetch" href="/assets/07-é‡æ’åºä¸happens-before.html-B3-zMZCE.js" as="script"><link rel="prefetch" href="/assets/08-volatitle.html-INn-mPUd.js" as="script"><link rel="prefetch" href="/assets/09-synchronizedä¸é”.html-BH7mpSwF.js" as="script"><link rel="prefetch" href="/assets/10-CASä¸åŸå­æ“ä½œ.html-Daqt3a-5.js" as="script"><link rel="prefetch" href="/assets/11-AQS.html-lwFIDnbR.js" as="script"><link rel="prefetch" href="/assets/12-çº¿ç¨‹æ± åŸç†.html-C9cFgwaN.js" as="script"><link rel="prefetch" href="/assets/13-é˜»å¡é˜Ÿåˆ—.html-CgKxyD5_.js" as="script"><link rel="prefetch" href="/assets/14-é”æ¥å£å’Œç±».html-GPcJcJaT.js" as="script"><link rel="prefetch" href="/assets/15-å¹¶å‘å®¹å™¨é›†åˆ.html-LleEz9RG.js" as="script"><link rel="prefetch" href="/assets/16-CopyOnWriteå®¹å™¨.html-L30yxe9B.js" as="script"><link rel="prefetch" href="/assets/17-é€šä¿¡å·¥å…·ç±».html-B1lFbZza.js" as="script"><link rel="prefetch" href="/assets/18-Fork_Joinæ¡†æ¶.html-BsAI_Y-1.js" as="script"><link rel="prefetch" href="/assets/19-Java8Streamå¹¶è¡Œè®¡ç®—åŸç†.html-B0SKP-Fi.js" as="script"><link rel="prefetch" href="/assets/20-è®¡åˆ’ä»»åŠ¡.html-BcJE-Fop.js" as="script"><link rel="prefetch" href="/assets/æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹.html-LH_IqysB.js" as="script"><link rel="prefetch" href="/assets/sf.html-mOMIOhzQ.js" as="script"><link rel="prefetch" href="/assets/äºŒå‰æœç´¢æ ‘çš„å‰é©±å’Œåç»§èŠ‚ç‚¹.html-C44Uo5YQ.js" as="script"><link rel="prefetch" href="/assets/ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘.html-CrQLpCuB.js" as="script"><link rel="prefetch" href="/assets/å†’æ³¡æ’åº.html-BeKlmRnl.js" as="script"><link rel="prefetch" href="/assets/åå¤§ç»å…¸æ’åºç®—æ³•æœ€å¼ºæ€»ç»“.html-DJRZjTy1.js" as="script"><link rel="prefetch" href="/assets/åŸºäºJavaå®ç°çº¢é»‘æ ‘çš„åŸºæœ¬æ“ä½œ.html-CyXIYPWM.js" as="script"><link rel="prefetch" href="/assets/å¹¶æŸ¥é›†.html-BqBCHQ-D.js" as="script"><link rel="prefetch" href="/assets/01-å‘½åé£æ ¼.html-tKkG5HRp.js" as="script"><link rel="prefetch" href="/assets/02-å¸¸é‡å®šä¹‰.html-D222u3NA.js" as="script"><link rel="prefetch" href="/assets/03-ä»£ç æ ¼å¼.html-BOe9XgMm.js" as="script"><link rel="prefetch" href="/assets/04-OOPè§„çº¦.html-C5z_mhEs.js" as="script"><link rel="prefetch" href="/assets/05-æ—¥æœŸæ—¶é—´.html-BP-4LWwY.js" as="script"><link rel="prefetch" href="/assets/06-é›†åˆå¤„ç†.html-OfYQk8d1.js" as="script"><link rel="prefetch" href="/assets/07-å¹¶å‘å¤„ç†.html-BWKvBMc0.js" as="script"><link rel="prefetch" href="/assets/08-æ§åˆ¶è¯­å¥.html-Dt32j3S_.js" as="script"><link rel="prefetch" href="/assets/09-æ³¨é‡Šè§„çº¦.html-CaCKDdDW.js" as="script"><link rel="prefetch" href="/assets/10-å…¶å®ƒ.html-_MUVhAKO.js" as="script"><link rel="prefetch" href="/assets/11-é”™è¯¯ç .html-hlVBkLQq.js" as="script"><link rel="prefetch" href="/assets/12-å¼‚å¸¸å¤„ç†.html-Rk-Ovb_D.js" as="script"><link rel="prefetch" href="/assets/13-æ—¥å¿—è§„çº¦.html-CU_s_OLA.js" as="script"><link rel="prefetch" href="/assets/14-å•å…ƒæµ‹è¯•.html-BQyEOdoG.js" as="script"><link rel="prefetch" href="/assets/15-å®‰å…¨è§„çº¦.html-CDWwM03B.js" as="script"><link rel="prefetch" href="/assets/16-å»ºè¡¨è§„çº¦.html-DuNswAh9.js" as="script"><link rel="prefetch" href="/assets/17-ç´¢å¼•è§„çº¦.html-NbOpXvrS.js" as="script"><link rel="prefetch" href="/assets/18-SQLè¯­å¥.html-DtC_f0Uz.js" as="script"><link rel="prefetch" href="/assets/19-ORMæ˜ å°„.html-Ds7Kw60t.js" as="script"><link rel="prefetch" href="/assets/20-åº”ç”¨åˆ†å±‚.html-pYHrU2ey.js" as="script"><link rel="prefetch" href="/assets/21-äºŒæ–¹åº“ä¾èµ–.html-gDC7_1ei.js" as="script"><link rel="prefetch" href="/assets/22-æœåŠ¡å™¨.html-g9naf2Iu.js" as="script"><link rel="prefetch" href="/assets/23-è®¾è®¡è§„çº¦.html-dI8rbJ9l.js" as="script"><link rel="prefetch" href="/assets/24-ä¸“æœ‰åè¯è§£é‡Š.html-xVMeRQIx.js" as="script"><link rel="prefetch" href="/assets/25-é”™è¯¯ç åˆ—è¡¨.html-QLiWI2dA.js" as="script"><link rel="prefetch" href="/assets/æ‰‹æŠ„ç‰ˆ.html-IbTlAJtP.js" as="script"><link rel="prefetch" href="/assets/404.html-C6ZsRfge.js" as="script"><link rel="prefetch" href="/assets/index.html-CoeSNcgO.js" as="script"><link rel="prefetch" href="/assets/index.html-A4DWQfz6.js" as="script"><link rel="prefetch" href="/assets/index.html-D1s_QJ-Z.js" as="script"><link rel="prefetch" href="/assets/index.html-DiHNTtR5.js" as="script"><link rel="prefetch" href="/assets/index.html-CvxhxmoR.js" as="script"><link rel="prefetch" href="/assets/index.html-DhieWSB1.js" as="script"><link rel="prefetch" href="/assets/index.html-Bo-XoTOY.js" as="script"><link rel="prefetch" href="/assets/index.html-BQI5A9zx.js" as="script"><link rel="prefetch" href="/assets/index.html-DjwUqUi3.js" as="script"><link rel="prefetch" href="/assets/index.html-BY3JzSst.js" as="script"><link rel="prefetch" href="/assets/index.html-BT24sbbw.js" as="script"><link rel="prefetch" href="/assets/index.html-BL6WEsUK.js" as="script"><link rel="prefetch" href="/assets/index.html-BQXB9F7t.js" as="script"><link rel="prefetch" href="/assets/index.html-Bro4dc0p.js" as="script"><link rel="prefetch" href="/assets/index.html-Corz-BRa.js" as="script"><link rel="prefetch" href="/assets/index.html-CCwJYL5i.js" as="script"><link rel="prefetch" href="/assets/index.html-BnA7FWZY.js" as="script"><link rel="prefetch" href="/assets/index.html-DN7fGx0H.js" as="script"><link rel="prefetch" href="/assets/index.html-CWTpXlJ5.js" as="script"><link rel="prefetch" href="/assets/index.html-BuWJCyKk.js" as="script"><link rel="prefetch" href="/assets/index.html-BAae8TqH.js" as="script"><link rel="prefetch" href="/assets/index.html-oTD9XGj0.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Vv0I9P.js" as="script"><link rel="prefetch" href="/assets/index.html-C4FFELYt.js" as="script"><link rel="prefetch" href="/assets/index.html-CpbBxLqP.js" as="script"><link rel="prefetch" href="/assets/index.html-W8YGXYfm.js" as="script"><link rel="prefetch" href="/assets/index.html-DPipgnwQ.js" as="script"><link rel="prefetch" href="/assets/index.html-_4YByl3S.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-GXRgw7eJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/panda.gif" alt><!----><span class="vp-site-name hide-in-pad">Pandaè¯šçš„åšå®¢</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/timeline/" aria-label="æ—¶é—´è½´"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-date" style=""></span><!--]-->æ—¶é—´è½´<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/tag/" aria-label="Tags"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-tag" style=""></span><!--]-->Tags<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/zhangchengk" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!----><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/" aria-label="åšå®¢ä¸»é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->åšå®¢ä¸»é¡µ<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Apache NIFIå¼€å‘</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Apache NIFIæ•™ç¨‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">IOæµ(java)</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JAVA</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">JOLT</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Springå¸¸è§é”™è¯¯</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ•°æ®åº“ CDC</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">æ·±å…¥æµ…å‡º Javaå¤šçº¿ç¨‹</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/01-%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" aria-label="è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ"><!---->è¿›ç¨‹ä¸çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/02-Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%85%A5%E9%97%A8%E7%B1%BB%E5%92%8C%E6%8E%A5%E5%8F%A3.html" aria-label="Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£"><!---->Javaå¤šçº¿ç¨‹å…¥é—¨ç±»å’Œæ¥å£<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/03-%E7%BA%BF%E7%A8%8B%E7%BB%84%E5%92%8C%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7.html" aria-label="çº¿ç¨‹ç»„å’Œçº¿ç¨‹ä¼˜å…ˆçº§"><!---->çº¿ç¨‹ç»„å’Œçº¿ç¨‹ä¼˜å…ˆçº§<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/04-Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E5%8F%8A%E4%B8%BB%E8%A6%81%E8%BD%AC%E5%8C%96%E6%96%B9%E6%B3%95.html" aria-label="Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•"><!---->Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/05-Java%E7%BA%BF%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1.html" aria-label="Javaçº¿ç¨‹é—´çš„é€šä¿¡"><!---->Javaçº¿ç¨‹é—´çš„é€šä¿¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/06-Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" aria-label="Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†"><!---->Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/07-%E9%87%8D%E6%8E%92%E5%BA%8F%E4%B8%8Ehappens-before.html" aria-label="é‡æ’åºä¸happens-before"><!---->é‡æ’åºä¸happens-before<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/08-volatitle.html" aria-label="volatitle"><!---->volatitle<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/09-synchronized%E4%B8%8E%E9%94%81.html" aria-label="synchronizedä¸é”"><!---->synchronizedä¸é”<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/10-CAS%E4%B8%8E%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C.html" aria-label="CASä¸åŸå­æ“ä½œ"><!---->CASä¸åŸå­æ“ä½œ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/11-AQS.html" aria-label="AQS"><!---->AQS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/12-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8E%9F%E7%90%86.html" aria-label="çº¿ç¨‹æ± åŸç†"><!---->çº¿ç¨‹æ± åŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/13-%E9%98%BB%E5%A1%9E%E9%98%9F%E5%88%97.html" aria-label="é˜»å¡é˜Ÿåˆ—"><!---->é˜»å¡é˜Ÿåˆ—<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/14-%E9%94%81%E6%8E%A5%E5%8F%A3%E5%92%8C%E7%B1%BB.html" aria-label="é”æ¥å£å’Œç±»"><!---->é”æ¥å£å’Œç±»<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/15-%E5%B9%B6%E5%8F%91%E5%AE%B9%E5%99%A8%E9%9B%86%E5%90%88.html" aria-label="å¹¶å‘å®¹å™¨é›†åˆ"><!---->å¹¶å‘å®¹å™¨é›†åˆ<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/16-CopyOnWrite%E5%AE%B9%E5%99%A8.html" aria-label="CopyOnWriteå®¹å™¨"><!---->CopyOnWriteå®¹å™¨<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/17-%E9%80%9A%E4%BF%A1%E5%B7%A5%E5%85%B7%E7%B1%BB.html" aria-label="é€šä¿¡å·¥å…·ç±»"><!---->é€šä¿¡å·¥å…·ç±»<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/18-Fork_Join%E6%A1%86%E6%9E%B6.html" aria-label="Fork_Joinæ¡†æ¶"><!---->Fork_Joinæ¡†æ¶<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/19-Java8Stream%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97%E5%8E%9F%E7%90%86.html" aria-label="Java 8 Streamå¹¶è¡Œè®¡ç®—åŸç†"><!---->Java 8 Streamå¹¶è¡Œè®¡ç®—åŸç†<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/20-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1.html" aria-label="è®¡åˆ’ä»»åŠ¡"><!---->è®¡åˆ’ä»»åŠ¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B.html" aria-label="æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ç®—æ³•</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é˜¿é‡Œ Javaå¼€å‘æ‰‹å†Œ</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Javaçº¿ç¨‹é—´çš„é€šä¿¡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://zhangchengk.github.io/about/intro.html" target="_blank" rel="noopener noreferrer">Pandaè¯š</a></span><span property="author" content="Pandaè¯š"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-12-06T00:00:00.000Z"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color1 clickable" role="navigation">æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹</span><!--]--><meta property="articleSection" content="æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 12 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT12M"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-1-é”ä¸åŒæ­¥">5.1 é”ä¸åŒæ­¥</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-2-ç­‰å¾…-é€šçŸ¥æœºåˆ¶">5.2 ç­‰å¾…/é€šçŸ¥æœºåˆ¶</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-3-ä¿¡å·é‡">5.3 ä¿¡å·é‡</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯">ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-4-ç®¡é“">5.4 ç®¡é“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-5-å…¶å®ƒé€šä¿¡ç›¸å…³">5.5 å…¶å®ƒé€šä¿¡ç›¸å…³</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-1-joinæ–¹æ³•">5.5.1 joinæ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-2-sleepæ–¹æ³•">5.5.2 sleepæ–¹æ³•</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-3-threadlocalç±»">5.5.3 ThreadLocalç±»</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-5-4-inheritablethreadlocal">5.5.4 InheritableThreadLocal</a></li><!----><!--]--></ul></li><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><p>åˆç†çš„ä½¿ç”¨Javaå¤šçº¿ç¨‹å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æœåŠ¡å™¨èµ„æºã€‚ä¸€èˆ¬æ¥è®²ï¼Œçº¿ç¨‹å†…éƒ¨æœ‰è‡ªå·±ç§æœ‰çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ï¼Œäº’ä¸å¹²æ‰°ã€‚ä½†æ˜¯å½“æˆ‘ä»¬éœ€è¦å¤šä¸ªçº¿ç¨‹ä¹‹é—´ç›¸äº’åä½œçš„æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬æŒæ¡Javaçº¿ç¨‹çš„é€šä¿¡æ–¹å¼ã€‚æœ¬æ–‡å°†ä»‹ç»Javaçº¿ç¨‹ä¹‹é—´çš„å‡ ç§é€šä¿¡åŸç†ã€‚</p><!-- more --><h2 id="_5-1-é”ä¸åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#_5-1-é”ä¸åŒæ­¥"><span>5.1 é”ä¸åŒæ­¥</span></a></h2><p>åœ¨Javaä¸­ï¼Œé”çš„æ¦‚å¿µéƒ½æ˜¯åŸºäºå¯¹è±¡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆç»å¸¸ç§°å®ƒä¸ºå¯¹è±¡é”ã€‚çº¿ç¨‹å’Œé”çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å©šå§»å…³ç³»æ¥ç†è§£ã€‚ä¸€ä¸ªé”åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªé”å¦‚æœå’Œä¸€ä¸ªçº¿ç¨‹â€œç»“å©šâ€ï¼ˆæŒæœ‰ï¼‰ï¼Œé‚£å…¶ä»–çº¿ç¨‹å¦‚æœéœ€è¦å¾—åˆ°è¿™ä¸ªé”ï¼Œå°±å¾—ç­‰è¿™ä¸ªçº¿ç¨‹å’Œè¿™ä¸ªé”â€œç¦»å©šâ€ï¼ˆé‡Šæ”¾ï¼‰ã€‚</p><p>åœ¨æˆ‘ä»¬çš„çº¿ç¨‹ä¹‹é—´ï¼Œæœ‰ä¸€ä¸ªåŒæ­¥çš„æ¦‚å¿µã€‚ä»€ä¹ˆæ˜¯åŒæ­¥å‘¢ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰2ä½æ­£åœ¨æŠ„æš‘å‡ä½œä¸šç­”æ¡ˆçš„åŒå­¦ï¼šçº¿ç¨‹Aå’Œçº¿ç¨‹Bã€‚å½“ä»–ä»¬æ­£åœ¨æŠ„çš„æ—¶å€™ï¼Œè€å¸ˆçªç„¶æ¥ä¿®æ”¹äº†ä¸€äº›ç­”æ¡ˆï¼Œå¯èƒ½Aå’ŒBæœ€åå†™å‡ºçš„æš‘å‡ä½œä¸šå°±ä¸ä¸€æ ·ã€‚æˆ‘ä»¬ä¸ºäº†A,Bèƒ½å†™å‡º2æœ¬ç›¸åŒçš„æš‘å‡ä½œä¸šï¼Œæˆ‘ä»¬å°±éœ€è¦è®©è€å¸ˆå…ˆä¿®æ”¹ç­”æ¡ˆï¼Œç„¶åAï¼ŒBåŒå­¦å†æŠ„ã€‚æˆ–è€…Aï¼ŒBåŒå­¦å…ˆæŠ„å®Œï¼Œè€å¸ˆå†ä¿®æ”¹ç­”æ¡ˆã€‚è¿™å°±æ˜¯çº¿ç¨‹Aï¼Œçº¿ç¨‹Bçš„çº¿ç¨‹åŒæ­¥ã€‚</p><p>å¯ä»¥ä»¥è§£é‡Šä¸ºï¼šçº¿ç¨‹åŒæ­¥æ˜¯çº¿ç¨‹ä¹‹é—´æŒ‰ç…§<strong>ä¸€å®šçš„é¡ºåº</strong>æ‰§è¡Œã€‚</p><p>ä¸ºäº†è¾¾åˆ°çº¿ç¨‹åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é”æ¥å®ç°å®ƒã€‚</p><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªæ— é”çš„ç¨‹åºï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> NoneLock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Thread A &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Thread B &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ ä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bå„è‡ªç‹¬ç«‹å·¥ä½œï¼Œè¾“å‡ºè‡ªå·±çš„æ‰“å°å€¼ã€‚å¦‚ä¸‹æ˜¯æˆ‘çš„ç”µè„‘ä¸ŠæŸä¸€æ¬¡è¿è¡Œçš„ç»“æœã€‚æ¯ä¸€æ¬¡è¿è¡Œç»“æœéƒ½ä¼šä¸ä¸€æ ·ã€‚</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span>....</span></span>
<span class="line"><span>Thread A 48</span></span>
<span class="line"><span>Thread A 49</span></span>
<span class="line"><span>Thread B 0</span></span>
<span class="line"><span>Thread A 50</span></span>
<span class="line"><span>Thread B 1</span></span>
<span class="line"><span>Thread A 51</span></span>
<span class="line"><span>Thread A 52</span></span>
<span class="line"><span>....</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘æƒ³ç­‰Aå…ˆæ‰§è¡Œå®Œä¹‹åï¼Œå†ç”±Bå»æ‰§è¡Œï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªâ€œå¯¹è±¡é”â€ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ObjectLock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Thread A &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;Thread B &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªåå­—ä¸º<code>lock</code>çš„å¯¹è±¡é”ã€‚æˆ‘ä»¬åœ¨<code>ThreadA</code>å’Œ<code>ThreadB</code>å†…éœ€è¦åŒæ­¥çš„ä»£ç å—é‡Œï¼Œéƒ½æ˜¯ç”¨<code>synchronized</code>å…³é”®å­—åŠ ä¸Šäº†åŒä¸€ä¸ªå¯¹è±¡é”<code>lock</code>ã€‚</p><p>ä¸Šæ–‡æˆ‘ä»¬è¯´åˆ°äº†ï¼Œæ ¹æ®çº¿ç¨‹å’Œé”çš„å…³ç³»ï¼ŒåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ä¸€ä¸ªé”ï¼Œé‚£ä¹ˆçº¿ç¨‹Bå°±ä¼šç­‰çº¿ç¨‹Aæ‰§è¡Œå®Œæˆåé‡Šæ”¾<code>lock</code>ï¼Œçº¿ç¨‹Bæ‰èƒ½è·å¾—é”<code>lock</code>ã€‚</p><blockquote><p>è¿™é‡Œåœ¨ä¸»çº¿ç¨‹é‡Œä½¿ç”¨sleepæ–¹æ³•ç¡çœ äº†10æ¯«ç§’ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹Bå…ˆå¾—åˆ°é”ã€‚å› ä¸ºå¦‚æœåŒæ—¶startï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Béƒ½æ˜¯å‡ºäºå°±ç»ªçŠ¶æ€ï¼Œæ“ä½œç³»ç»Ÿå¯èƒ½ä¼šå…ˆè®©Bè¿è¡Œã€‚è¿™æ ·å°±ä¼šå…ˆè¾“å‡ºBçš„å†…å®¹ï¼Œç„¶åBæ‰§è¡Œå®Œæˆä¹‹åè‡ªåŠ¨é‡Šæ”¾é”ï¼Œçº¿ç¨‹Aå†æ‰§è¡Œã€‚</p></blockquote><h2 id="_5-2-ç­‰å¾…-é€šçŸ¥æœºåˆ¶" tabindex="-1"><a class="header-anchor" href="#_5-2-ç­‰å¾…-é€šçŸ¥æœºåˆ¶"><span>5.2 ç­‰å¾…/é€šçŸ¥æœºåˆ¶</span></a></h2><p>ä¸Šé¢ä¸€ç§åŸºäºâ€œé”â€çš„æ–¹å¼ï¼Œçº¿ç¨‹éœ€è¦ä¸æ–­åœ°å»å°è¯•è·å¾—é”ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå†ç»§ç»­å°è¯•ã€‚è¿™å¯èƒ½ä¼šè€—è´¹æœåŠ¡å™¨èµ„æºã€‚</p><p>è€Œç­‰å¾…/é€šçŸ¥æœºåˆ¶æ˜¯å¦ä¸€ç§æ–¹å¼ã€‚</p><p>Javaå¤šçº¿ç¨‹çš„ç­‰å¾…/é€šçŸ¥æœºåˆ¶æ˜¯åŸºäº<code>Object</code>ç±»çš„<code>wait()</code>æ–¹æ³•å’Œ<code>notify()</code>, <code>notifyAll()</code>æ–¹æ³•æ¥å®ç°çš„ã€‚</p><blockquote><p>notify()æ–¹æ³•ä¼šéšæœºå«é†’ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œè€ŒnotifyAll()ä¼šå«é†’æ‰€æœ‰æ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ã€‚</p></blockquote><p>å‰é¢æˆ‘ä»¬è®²åˆ°ï¼Œä¸€ä¸ªé”åŒä¸€æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æŒæœ‰ã€‚è€Œå‡å¦‚çº¿ç¨‹Aç°åœ¨æŒæœ‰äº†ä¸€ä¸ªé”<code>lock</code>å¹¶å¼€å§‹æ‰§è¡Œï¼Œå®ƒå¯ä»¥ä½¿ç”¨<code>lock.wait()</code>è®©è‡ªå·±è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<code>lock</code>è¿™ä¸ªé”æ˜¯è¢«é‡Šæ”¾äº†çš„ã€‚</p><p>è¿™æ—¶ï¼Œçº¿ç¨‹Bè·å¾—äº†<code>lock</code>è¿™ä¸ªé”å¹¶å¼€å§‹æ‰§è¡Œï¼Œå®ƒå¯ä»¥åœ¨æŸä¸€æ—¶åˆ»ï¼Œä½¿ç”¨<code>lock.notify()</code>ï¼Œé€šçŸ¥ä¹‹å‰æŒæœ‰<code>lock</code>é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€çš„çº¿ç¨‹Aï¼Œè¯´â€œçº¿ç¨‹Aä½ ä¸ç”¨ç­‰äº†ï¼Œå¯ä»¥å¾€ä¸‹æ‰§è¡Œäº†â€ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™çº¿ç¨‹Bå¹¶æ²¡æœ‰é‡Šæ”¾é”<code>lock</code>ï¼Œé™¤éçº¿ç¨‹Bè¿™ä¸ªæ—¶å€™ä½¿ç”¨<code>lock.wait()</code>é‡Šæ”¾é”ï¼Œæˆ–è€…çº¿ç¨‹Bæ‰§è¡Œç»“æŸè‡ªè¡Œé‡Šæ”¾é”ï¼Œçº¿ç¨‹Aæ‰èƒ½å¾—åˆ°<code>lock</code>é”ã€‚</p></blockquote><p>æˆ‘ä»¬ç”¨ä»£ç æ¥å®ç°ä¸€ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> WaitAndNotify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> lock </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                    try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ThreadA: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (lock) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                for</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                    try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ThreadB: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">wait</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                        e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                lock</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">notify</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªDemoé‡Œï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bé¦–å…ˆæ‰“å°å‡ºè‡ªå·±éœ€è¦çš„ä¸œè¥¿ï¼Œç„¶åä½¿ç”¨<code>notify()</code>æ–¹æ³•å«é†’å¦ä¸€ä¸ªæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œç„¶åè‡ªå·±ä½¿ç”¨<code>wait()</code>æ–¹æ³•é™·å…¥ç­‰å¾…å¹¶é‡Šæ”¾<code>lock</code>é”ã€‚</p><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ç­‰å¾…/é€šçŸ¥æœºåˆ¶ä½¿ç”¨çš„æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¯¹è±¡é”ï¼Œå¦‚æœä½ ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ˜¯ä¸åŒçš„å¯¹è±¡é”ï¼Œé‚£å®ƒä»¬ä¹‹é—´æ˜¯ä¸èƒ½ç”¨ç­‰å¾…/é€šçŸ¥æœºåˆ¶é€šä¿¡çš„ã€‚</p></blockquote><h2 id="_5-3-ä¿¡å·é‡" tabindex="-1"><a class="header-anchor" href="#_5-3-ä¿¡å·é‡"><span>5.3 ä¿¡å·é‡</span></a></h2><p>JDKæä¾›äº†ä¸€ä¸ªç±»ä¼¼äºâ€œä¿¡å·é‡â€åŠŸèƒ½çš„ç±»<code>Semaphore</code>ã€‚ä½†æœ¬æ–‡ä¸æ˜¯è¦ä»‹ç»è¿™ä¸ªç±»ï¼Œè€Œæ˜¯ä»‹ç»ä¸€ç§åŸºäº<code>volatile</code>å…³é”®å­—çš„è‡ªå·±å®ç°çš„ä¿¡å·é‡é€šä¿¡ã€‚</p><p>åé¢ä¼šæœ‰ä¸“é—¨çš„ç« èŠ‚ä»‹ç»<code>volatile</code>å…³é”®å­—ï¼Œè¿™é‡Œåªæ˜¯åšä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚</p><blockquote><p>volitileå…³é”®å­—èƒ½å¤Ÿä¿è¯å†…å­˜çš„å¯è§æ€§ï¼Œå¦‚æœç”¨volitileå…³é”®å­—å£°æ˜äº†ä¸€ä¸ªå˜é‡ï¼Œåœ¨ä¸€ä¸ªçº¿ç¨‹é‡Œé¢æ”¹å˜äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œé‚£å…¶å®ƒçº¿ç¨‹æ˜¯ç«‹é©¬å¯è§æ›´æ”¹åçš„å€¼çš„ã€‚</p></blockquote><p>æ¯”å¦‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘æƒ³è®©çº¿ç¨‹Aè¾“å‡º0ï¼Œç„¶åçº¿ç¨‹Bè¾“å‡º1ï¼Œå†ç„¶åçº¿ç¨‹Aè¾“å‡º2â€¦ä»¥æ­¤ç±»æ¨ã€‚æˆ‘åº”è¯¥æ€æ ·å®ç°å‘¢ï¼Ÿ</p><p>ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Signal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> volatile</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;threadA: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> signal);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                    synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                        signal</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            while</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">%</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;threadB: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> signal);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                    synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                        signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> signal </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 4</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨äº†ä¸€ä¸ª<code>volatile</code>å˜é‡<code>signal</code>æ¥å®ç°äº†â€œä¿¡å·é‡â€çš„æ¨¡å‹ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>volatile</code>å˜é‡éœ€è¦è¿›è¡ŒåŸå­æ“ä½œã€‚<code>signal++</code>å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>synchronized</code>ç»™å®ƒâ€œä¸Šé”â€ã€‚</p><blockquote><p>è¿™ç§å®ç°æ–¹å¼å¹¶ä¸ä¸€å®šé«˜æ•ˆï¼Œæœ¬ä¾‹åªæ˜¯æ¼”ç¤ºä¿¡å·é‡</p></blockquote><h3 id="ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯"><span>ä¿¡å·é‡çš„åº”ç”¨åœºæ™¯</span></a></h3><p>å‡å¦‚åœ¨ä¸€ä¸ªåœè½¦åœºä¸­ï¼Œè½¦ä½æ˜¯æˆ‘ä»¬çš„å…¬å…±èµ„æºï¼Œçº¿ç¨‹å°±å¦‚åŒè½¦è¾†ï¼Œè€Œçœ‹é—¨çš„ç®¡ç†å‘˜å°±æ˜¯èµ·çš„â€œä¿¡å·é‡â€çš„ä½œç”¨ã€‚</p><p>å› ä¸ºåœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹ï¼ˆè¶…è¿‡2ä¸ªï¼‰éœ€è¦ç›¸äº’åˆä½œï¼Œæˆ‘ä»¬ç”¨ç®€å•çš„â€œé”â€å’Œâ€œç­‰å¾…é€šçŸ¥æœºåˆ¶â€å°±ä¸é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨åˆ°ä¿¡å·é‡ã€‚</p><p>å…¶å®JDKä¸­æä¾›çš„å¾ˆå¤šå¤šçº¿ç¨‹é€šä¿¡å·¥å…·ç±»éƒ½æ˜¯åŸºäºä¿¡å·é‡æ¨¡å‹çš„ã€‚æˆ‘ä»¬ä¼šåœ¨åé¢ç¬¬ä¸‰ç¯‡çš„æ–‡ç« ä¸­ä»‹ç»ä¸€äº›å¸¸ç”¨çš„é€šä¿¡å·¥å…·ç±»ã€‚</p><h2 id="_5-4-ç®¡é“" tabindex="-1"><a class="header-anchor" href="#_5-4-ç®¡é“"><span>5.4 ç®¡é“</span></a></h2><p>ç®¡é“æ˜¯åŸºäºâ€œç®¡é“æµâ€çš„é€šä¿¡æ–¹å¼ã€‚JDKæä¾›äº†<code>PipedWriter</code>ã€ <code>PipedReader</code>ã€ <code>PipedOutputStream</code>ã€ <code>PipedInputStream</code>ã€‚å…¶ä¸­ï¼Œå‰é¢ä¸¤ä¸ªæ˜¯åŸºäºå­—ç¬¦çš„ï¼Œåé¢ä¸¤ä¸ªæ˜¯åŸºäºå­—èŠ‚æµçš„ã€‚</p><p>è¿™é‡Œçš„ç¤ºä¾‹ä»£ç ä½¿ç”¨çš„æ˜¯åŸºäºå­—ç¬¦çš„ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ReaderThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PipedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> reader</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ReaderThread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">PipedReader</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> reader</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> reader;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;this is reader&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> receive</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                while</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> ((receive </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> reader</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()) </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">!=</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">((</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">char</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)receive);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> WriterThread</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> PipedWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> writer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> WriterThread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">PipedWriter</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> writer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">writer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> writer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;this is writer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            int</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> receive</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                writer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    writer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">IOException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> IOException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        PipedWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> writer</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PipedWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        PipedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> reader</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> PipedReader</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        writer</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(reader); </span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¿™é‡Œæ³¨æ„ä¸€å®šè¦è¿æ¥ï¼Œæ‰èƒ½é€šä¿¡</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ReaderThread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(reader)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> WriterThread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(writer)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> is reader</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> is writer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬é€šè¿‡çº¿ç¨‹çš„æ„é€ å‡½æ•°ï¼Œä¼ å…¥äº†<code>PipedWrite</code>å’Œ<code>PipedReader</code>å¯¹è±¡ã€‚å¯ä»¥ç®€å•åˆ†æä¸€ä¸‹è¿™ä¸ªç¤ºä¾‹ä»£ç çš„æ‰§è¡Œæµç¨‹ï¼š</p><ol><li>çº¿ç¨‹ReaderThreadå¼€å§‹æ‰§è¡Œï¼Œ</li><li>çº¿ç¨‹ReaderThreadä½¿ç”¨ç®¡é“reader.read()è¿›å…¥â€é˜»å¡â€œï¼Œ</li><li>çº¿ç¨‹WriterThreadå¼€å§‹æ‰§è¡Œï¼Œ</li><li>çº¿ç¨‹WriterThreadç”¨writer.write(&quot;test&quot;)å¾€ç®¡é“å†™å…¥å­—ç¬¦ä¸²ï¼Œ</li><li>çº¿ç¨‹WriterThreadä½¿ç”¨writer.close()ç»“æŸç®¡é“å†™å…¥ï¼Œå¹¶æ‰§è¡Œå®Œæ¯•ï¼Œ</li><li>çº¿ç¨‹ReaderThreadæ¥å—åˆ°ç®¡é“è¾“å‡ºçš„å­—ç¬¦ä¸²å¹¶æ‰“å°ï¼Œ</li><li>çº¿ç¨‹ReaderThreadæ‰§è¡Œå®Œæ¯•ã€‚</li></ol><p><strong>ç®¡é“é€šä¿¡çš„åº”ç”¨åœºæ™¯</strong></p><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ã€‚ä½¿ç”¨ç®¡é“å¤šåŠä¸I/Oæµç›¸å…³ã€‚å½“æˆ‘ä»¬ä¸€ä¸ªçº¿ç¨‹éœ€è¦å…ˆå¦ä¸€ä¸ªçº¿ç¨‹å‘é€ä¸€ä¸ªä¿¡æ¯ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰æˆ–è€…æ–‡ä»¶ç­‰ç­‰æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ç®¡é“é€šä¿¡äº†ã€‚</p><h2 id="_5-5-å…¶å®ƒé€šä¿¡ç›¸å…³" tabindex="-1"><a class="header-anchor" href="#_5-5-å…¶å®ƒé€šä¿¡ç›¸å…³"><span>5.5 å…¶å®ƒé€šä¿¡ç›¸å…³</span></a></h2><p>ä»¥ä¸Šä»‹ç»äº†ä¸€äº›çº¿ç¨‹é—´é€šä¿¡çš„åŸºæœ¬åŸç†å’Œæ–¹æ³•ã€‚é™¤æ­¤ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¸çº¿ç¨‹é€šä¿¡ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œè¿™é‡Œä¸€å¹¶ä»‹ç»ã€‚</p><h3 id="_5-5-1-joinæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_5-5-1-joinæ–¹æ³•"><span>5.5.1 joinæ–¹æ³•</span></a></h3><p>join()æ–¹æ³•æ˜¯Threadç±»çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹é™·å…¥â€œç­‰å¾…â€çŠ¶æ€ï¼Œç­‰joinçš„è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæˆåï¼Œå†ç»§ç»­æ‰§è¡Œå½“å‰çº¿ç¨‹ã€‚</p><p>æœ‰æ—¶å€™ï¼Œä¸»çº¿ç¨‹åˆ›å»ºå¹¶å¯åŠ¨äº†å­çº¿ç¨‹ï¼Œå¦‚æœå­çº¿ç¨‹ä¸­éœ€è¦è¿›è¡Œå¤§é‡çš„è€—æ—¶è¿ç®—ï¼Œä¸»çº¿ç¨‹å¾€å¾€å°†æ—©äºå­çº¿ç¨‹ç»“æŸä¹‹å‰ç»“æŸã€‚</p><p>å¦‚æœä¸»çº¿ç¨‹æƒ³ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè·å¾—å­çº¿ç¨‹ä¸­çš„å¤„ç†å®Œçš„æŸä¸ªæ•°æ®ï¼Œå°±è¦ç”¨åˆ°joinæ–¹æ³•äº†ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Join</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œæˆ‘å…ˆç¡ä¸€ç§’&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œæˆ‘ç¡å®Œäº†ä¸€ç§’&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> InterruptedException</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> thread</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">        System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;å¦‚æœä¸åŠ joinæ–¹æ³•ï¼Œæˆ‘ä¼šå…ˆè¢«æ‰“å‡ºæ¥ï¼ŒåŠ äº†å°±ä¸ä¸€æ ·äº†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„join()æ–¹æ³•æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯join(long)ï¼Œ ä¸€ä¸ªæ˜¯join(long, int)ã€‚</p><p>å®é™…ä¸Šï¼Œé€šè¿‡æºç ä½ ä¼šå‘ç°ï¼Œjoin()æ–¹æ³•åŠå…¶é‡è½½æ–¹æ³•åº•å±‚éƒ½æ˜¯åˆ©ç”¨äº†wait(long)è¿™ä¸ªæ–¹æ³•ã€‚</p><p>å¯¹äºjoin(long, int)ï¼Œé€šè¿‡æŸ¥çœ‹æºç (JDK 1.8)å‘ç°ï¼Œåº•å±‚å¹¶æ²¡æœ‰ç²¾ç¡®åˆ°çº³ç§’ï¼Œè€Œæ˜¯å¯¹ç¬¬äºŒä¸ªå‚æ•°åšäº†ç®€å•çš„åˆ¤æ–­å’Œå¤„ç†ã€‚</p><h3 id="_5-5-2-sleepæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_5-5-2-sleepæ–¹æ³•"><span>5.5.2 sleepæ–¹æ³•</span></a></h3><p>sleepæ–¹æ³•æ˜¯Threadç±»çš„ä¸€ä¸ªé™æ€æ–¹æ³•ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©å½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´ã€‚å®ƒæœ‰è¿™æ ·ä¸¤ä¸ªæ–¹æ³•ï¼š</p><ul><li>Thread.sleep(long)</li><li>Thread.sleep(long, int)</li></ul><blockquote><p>åŒæ ·ï¼ŒæŸ¥çœ‹æºç (JDK 1.8)å‘ç°ï¼Œç¬¬äºŒä¸ªæ–¹æ³•è²Œä¼¼åªå¯¹ç¬¬äºŒä¸ªå‚æ•°åšäº†ç®€å•çš„å¤„ç†ï¼Œæ²¡æœ‰ç²¾ç¡®åˆ°çº³ç§’ã€‚å®é™…ä¸Šè¿˜æ˜¯è°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚</p></blockquote><p>è¿™é‡Œéœ€è¦å¼ºè°ƒä¸€ä¸‹ï¼š**sleepæ–¹æ³•æ˜¯ä¸ä¼šé‡Šæ”¾å½“å‰çš„é”çš„ï¼Œè€Œwaitæ–¹æ³•ä¼šã€‚**è¿™ä¹Ÿæ˜¯æœ€å¸¸è§çš„ä¸€ä¸ªå¤šçº¿ç¨‹é¢è¯•é¢˜ã€‚</p><p>å®ƒä»¬è¿˜æœ‰è¿™äº›åŒºåˆ«ï¼š</p><ul><li>waitå¯ä»¥æŒ‡å®šæ—¶é—´ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼›è€Œsleepå¿…é¡»æŒ‡å®šæ—¶é—´ã€‚</li><li>waité‡Šæ”¾cpuèµ„æºï¼ŒåŒæ—¶é‡Šæ”¾é”ï¼›sleepé‡Šæ”¾cpuèµ„æºï¼Œä½†æ˜¯ä¸é‡Šæ”¾é”ï¼Œæ‰€ä»¥æ˜“æ­»é”ã€‚</li><li>waitå¿…é¡»æ”¾åœ¨åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ï¼Œè€Œsleepå¯ä»¥å†ä»»æ„ä½ç½®</li></ul><h3 id="_5-5-3-threadlocalç±»" tabindex="-1"><a class="header-anchor" href="#_5-5-3-threadlocalç±»"><span>5.5.3 ThreadLocalç±»</span></a></h3><p>ThreadLocalæ˜¯ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å‰¯æœ¬å˜é‡å·¥å…·ç±»ã€‚å†…éƒ¨æ˜¯ä¸€ä¸ª<strong>å¼±å¼•ç”¨</strong>çš„Mapæ¥ç»´æŠ¤ã€‚è¿™é‡Œä¸è¯¦ç»†ä»‹ç»å®ƒçš„åŸç†ï¼Œè€Œæ˜¯åªæ˜¯ä»‹ç»å®ƒçš„ä½¿ç”¨ï¼Œä»¥åæœ‰ç‹¬ç«‹ç« èŠ‚æ¥ä»‹ç»ThreadLocalç±»çš„åŸç†ã€‚</p><p>æœ‰äº›æœ‹å‹ç§°ThreadLocalä¸º<strong>çº¿ç¨‹æœ¬åœ°å˜é‡</strong>æˆ–<strong>çº¿ç¨‹æœ¬åœ°å­˜å‚¨</strong>ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒThreadLocalç±»å¹¶ä¸å±äºå¤šçº¿ç¨‹é—´çš„é€šä¿¡ï¼Œè€Œæ˜¯è®©æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±â€ç‹¬ç«‹â€œçš„å˜é‡ï¼Œçº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“ã€‚å®ƒä¸ºæ¯ä¸ªçº¿ç¨‹éƒ½åˆ›å»ºä¸€ä¸ª<strong>å‰¯æœ¬</strong>ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨çš„å‰¯æœ¬å˜é‡ã€‚</p><p>ThreadLocalç±»æœ€å¸¸ç”¨çš„å°±æ˜¯setæ–¹æ³•å’Œgetæ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadLocalDemo</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">    static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadA</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">threadLocal</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> threadLocal;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ThreadAè¾“å‡ºï¼š&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> ThreadB</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#E5C07B;"> Runnable</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            private</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">                this</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">threadLocal</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> threadLocal;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">                try</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">InterruptedException</span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"> e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                    e</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">                System</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">out</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;ThreadBè¾“å‡ºï¼š&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> threadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">        public</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#E06C75;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">            ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#E5C07B;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">threadLocal</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;"> ThreadLocal</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadA</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(threadLocal)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">            new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> Thread</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> ThreadB</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">(threadLocal)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">// è¾“å‡ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadAè¾“å‡ºï¼š</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">A</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">ThreadBè¾“å‡ºï¼š</span><span style="--shiki-light:#24292E;--shiki-dark:#E5C07B;">B</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨çš„åŒä¸€ä¸ªThreadLocalå®ä¾‹ï¼ˆé€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥ï¼‰ï¼Œä½†æ˜¯å®ƒä»¬å„è‡ªå¯ä»¥å­˜å–è‡ªå·±å½“å‰çº¿ç¨‹çš„ä¸€ä¸ªå€¼ã€‚</p><p>é‚£ThreadLocalæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå¦‚æœåªæ˜¯å•çº¯çš„æƒ³è¦çº¿ç¨‹éš”ç¦»ï¼Œåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å£°æ˜ä¸€ä¸ªç§æœ‰å˜é‡å°±å¥½äº†å‘€ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ThreadLocalï¼Ÿ</p><p>å¦‚æœå¼€å‘è€…å¸Œæœ›å°†ç±»çš„æŸä¸ªé™æ€å˜é‡ï¼ˆuser IDæˆ–è€…transaction IDï¼‰ä¸çº¿ç¨‹çŠ¶æ€å…³è”ï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨ThreadLocalã€‚</p><p>æœ€å¸¸è§çš„ThreadLocalä½¿ç”¨åœºæ™¯ä¸ºç”¨æ¥è§£å†³æ•°æ®åº“è¿æ¥ã€Sessionç®¡ç†ç­‰ã€‚æ•°æ®åº“è¿æ¥å’ŒSessionç®¡ç†æ¶‰åŠå¤šä¸ªå¤æ‚å¯¹è±¡çš„åˆå§‹åŒ–å’Œå…³é—­ã€‚å¦‚æœåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­å£°æ˜ä¸€äº›ç§æœ‰å˜é‡æ¥è¿›è¡Œæ“ä½œï¼Œé‚£è¿™ä¸ªçº¿ç¨‹å°±å˜å¾—ä¸é‚£ä¹ˆâ€œè½»é‡â€äº†ï¼Œéœ€è¦é¢‘ç¹çš„åˆ›å»ºå’Œå…³é—­è¿æ¥ã€‚</p><h3 id="_5-5-4-inheritablethreadlocal" tabindex="-1"><a class="header-anchor" href="#_5-5-4-inheritablethreadlocal"><span>5.5.4 InheritableThreadLocal</span></a></h3><p>InheritableThreadLocalç±»ä¸ThreadLocalç±»ç¨æœ‰ä¸åŒï¼ŒInheritableæ˜¯ç»§æ‰¿çš„æ„æ€ã€‚å®ƒä¸ä»…ä»…æ˜¯å½“å‰çº¿ç¨‹å¯ä»¥å­˜å–å‰¯æœ¬å€¼ï¼Œè€Œä¸”å®ƒçš„å­çº¿ç¨‹ä¹Ÿå¯ä»¥å­˜å–è¿™ä¸ªå‰¯æœ¬å€¼ã€‚</p><p><strong>å‚è€ƒèµ„æ–™</strong></p><ul><li>JDK 1.8 æºç </li><li>â€‹<a href="http://ifeve.com/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E7%BA%BF%E7%A8%8B%E9%80%9A%E4%BF%A1/" target="_blank" rel="noopener noreferrer">æ·±å…¥ç†è§£çº¿ç¨‹é€šä¿¡</a>â€‹</li><li>â€‹<a href="https://www.cnblogs.com/hapjin/p/5492619.html" target="_blank" rel="noopener noreferrer">JAVAå¤šçº¿ç¨‹ä¹‹çº¿ç¨‹é—´çš„é€šä¿¡æ–¹å¼</a>â€‹</li><li>â€‹<a href="http://ifeve.com/thread-signaling/" target="_blank" rel="noopener noreferrer">çº¿ç¨‹é€šä¿¡</a></li></ul></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/zhangchengk/edit/main/src/æ·±å…¥æµ…å‡ºJavaå¤šçº¿ç¨‹/05-Javaçº¿ç¨‹é—´çš„é€šä¿¡.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: zhangchengk@yonyou.com">zhangcheng</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/04-Java%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81%E5%8F%8A%E4%B8%BB%E8%A6%81%E8%BD%AC%E5%8C%96%E6%96%B9%E6%B3%95.html" aria-label="Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->Javaçº¿ç¨‹çš„çŠ¶æ€åŠä¸»è¦è½¬åŒ–æ–¹æ³•</div></a><a class="route-link auto-link next" href="/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAJava%E5%A4%9A%E7%BA%BF%E7%A8%8B/06-Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html" aria-label="Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Javaå†…å­˜æ¨¡å‹åŸºç¡€çŸ¥è¯†<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">è¯»ä¹¦åˆç¬”è®°</div><div class="vp-copyright">Copyright Â© 2024 Pandaè¯š </div></footer></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BQ2saXR6.js" defer></script>
  </body>
</html>
